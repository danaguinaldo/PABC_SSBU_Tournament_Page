function mfpAlert(e,t){t||(t="notice");var i=$('<button class="positive">').html('<i class="fa fa-fw fa-check"></i> Gotcha').click(function(){$.magnificPopup.close()}),a=$('<div class="lightbox dialog '+t+'">').append($("<p>").html(e)).append($("<hr>")).append($("<p>").append(i));$.magnificPopup.open({modal:!0,removalDelay:fade_transition,items:{type:"inline",src:a}})}function mfpConfirm(e,t,i){i||(i="alert");var a=$('<button class="negative">').html('<i class="fa fa-fw fa-check"></i> Yes').click(function(){$.magnificPopup.close(),setTimeout(function(){return t()},fade_transition)}),n=$('<button class="neutral">').html('<i class="fa fa-fw fa-close"></i> No').click(function(){$.magnificPopup.close()}),o=$('<div class="lightbox dialog '+i+'">').append($("<p>").html(e)).append($("<hr>")).append($("<p>").append(a).append(n));$.magnificPopup.open({modal:!0,removalDelay:fade_transition,items:{type:"inline",src:o}})}function mfpPrompt(e,t,i,a){a||(a="notice");var n=$("<form>");$.each(i,function(e,t){if(void 0===t.type&&(t.type="text"),void 0===t.name&&(t.name=""),void 0===t.label&&(t.label=""),void 0===t.placeholder&&(t.placeholder=""),void 0===t.value&&(t.value=""),void 0===t.data&&(t.data=""),t.element=$('<input type="'+t.type+'" name="'+t.name+'" value="'+t.value+'" '+t.data+">"),t.element.uniqueId(),t.id=t.element.attr("id"),t.p=$("<p>"),t.label){var i=$("<label>"+t.label+"</label>");"text"==t.type&&i.attr("for",t.id),i.appendTo(t.p),$("<br>").appendTo(t.p)}t.element.appendTo(t.p),t.placeholder&&("checkbox"==t.type?$("<label>"+t.placeholder+"</label>").addClass("text").attr("for",t.id).appendTo(t.p):"text"==t.type&&t.element.attr("placeholder",t.placeholder)),t.p.appendTo(n)});var o=$('<button class="positive">').html('<i class="fa fa-fw fa-check"></i> Go').click(function(){$.magnificPopup.close();var e=$(this).parents(".lightbox").find("form").first().find("input"),i=!1;e.length&&(i={},e.each(function(){var e=$(this),t=e.attr("type");"checkbox"==t?i[e.attr("name")]=e.prop("checked")?e.val():"":"text"==t&&(i[e.attr("name")]=e.val())})),setTimeout(function(){return t(i)},fade_transition)}),l=$('<button class="neutral">').html('<i class="fa fa-fw fa-close"></i> Cancel').click(function(){$.magnificPopup.close()}),s=$('<div class="lightbox dialog '+a+'">').append($("<p>").html(e)).append($("<hr>")).append(n).append($("<p>").append(o).append(l));$.magnificPopup.open({modal:!0,removalDelay:fade_transition,items:{type:"inline",src:s},callbacks:{open:function(){setTimeout(function(){$(".lightbox").find("input").first().focus().select()},100)}}})}function getNavBreakpoint(){return window.getComputedStyle?removeQuotes(window.getComputedStyle(document.body,":after").getPropertyValue("content")):"640px"}function removeQuotes(e){return("string"==typeof e||e instanceof String)&&(e=e.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"")),e}function prepareNav(t){$(t).find("nav > ul a.selected").parents("ul").prev("a").addClass("selected"),$(t).find("nav > ul li a").each(function(){0<$(this).next().length&&$(this).addClass("parent")}),$(t).find(".nav-toggle").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$(t).find("nav > ul").toggle(),$(t).toggleClass("open")})}function adjustNav(e){document.body.clientWidth<=getNavBreakpoint().split("px").join("")?($(e).find(".nav-toggle").css("display","block"),$(e).find(".nav-toggle").hasClass("active")?$(e).find("nav > ul").show():$(e).find("nav > ul").hide(),$(e).find("nav > ul li").unbind("hover"),$(e).find("nav > ul li a.parent").unbind("click").bind("click",function(e){e.preventDefault(),$(this).parent("li").toggleClass("hover")})):($(e).find(".nav-toggle").css("display","none"),$(e).find("nav > ul").show(),$(e).find("nav > ul li").removeClass("hover"),$(e).find("nav > ul li a").unbind("click"),$(e).find("nav > ul li").unbind("hover").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}))}function prepareSlideshow(e){if(slideshow=$(e),slideshow.current_slide=-1,slideshow.images=slideshow.children("img"),slideshow.images.first().each(function(){$("<img>").attr("src",$(this).attr("src")),this.slideshow=slideshow}),slideshow.images.css({opacity:0,visibility:"visible"}).each(function(){var e=$(this);e.imagesLoaded(function(){e.addClass("loaded")})}),slideshow.overlay=slideshow.children(".block-inner").first(),slideshow.overlay.children("[data-slide]").length?slideshow.contents=slideshow.overlay.children("[data-slide]"):slideshow.overlay.children().length?slideshow.contents=slideshow.overlay.children().attr("data-slide","all"):slideshow.contents=[],slideshow.contents.length&&(slideshow.contents.css({opacity:0}),slideshow.contents.css("display","none")),slideshow.slide_count=slideshow.images.length,slideshow.images.first().imagesLoaded(function(){var e=this.elements[0].slideshow;playSlides(e),e.data("autoplay")||stopSlides(e)}),1<slideshow.slide_count&&0!==slideshow.data("arrows")){var t=$('<a class="prev" href="#"><i class="fa fa-angle-left"></i></a>');t.get(0).slideshow=slideshow,t.click(function(e){e.preventDefault(),stopSlides(this.slideshow),rotateSlide(this.slideshow,"prev")}).dblclick(function(e){e.preventDefault(),e.stopPropagation()});var i=$('<a class="next" href="#"><i class="fa fa-angle-right"></i></a>');i.get(0).slideshow=slideshow,i.click(function(e){e.preventDefault(),stopSlides(this.slideshow),rotateSlide(this.slideshow,"next")}).dblclick(function(e){e.preventDefault(),e.stopPropagation()}),slideshow.append([t,i]),0==t.css("opacity")&&(t.css("opacity",0),i.css("opacity",0),slideshow.hover(function(){$(this).find("a.next, a.prev").stop().animate({opacity:1},fade_transition)},function(){$(this).find("a.next, a.prev").stop().animate({opacity:0},fade_transition)}))}if(1<slideshow.slide_count&&slideshow.data("dots")){var a=$('<div class="dots"></div>');slideshow.images.each(function(e){var t=$('<a href="#" data-slide="'+e+'"><i class="fa fa-circle"></i></a>');t.get(0).slideshow=slideshow,t.click(function(e){$(this).hasClass("selected")||(e.preventDefault(),stopSlides(this.slideshow),showSlide(this.slideshow,1))}),a.append(t)}),slideshow.append(a)}}function playSlides(e,t){void 0===t&&(t=0),showSlide(e,t),1<e.slide_count&&(e.slide_interval=setInterval(function(){rotateSlide(e)},slide_time))}function rotateSlide(e,t){if("prev"==t)var i=e.current_slide-1==-1?e.slide_count-1:e.current_slide-1;else i=e.current_slide+1==e.slide_count?0:e.current_slide+1;showSlide(e,i)}function showSlide(e,a){var t=e.children("img:eq("+a+")"),i=e.children("img").not(t.get(0));t.hasClass("loaded")?(e.children("img:eq("+e.current_slide+")").animate({opacity:0},slide_transition,function(){i.css({height:0,opacity:0}),t.css("height","auto").animate({opacity:1},slide_transition)}),e.contents.length&&e.contents.each(function(){var e=$(this),t=","+e.data("slide")+",",i=","+(a+1)+",";t==i||0<=t.indexOf(i)||",all,"==t?"none"==e.css("display")&&setTimeout(function(){e.css({opacity:0,display:"block"}),e.animate({opacity:1},text_transition)},text_transition):"block"==e.css("display")&&e.animate({opacity:0},text_transition,function(){e.css({display:"none"})})}),e.current_slide=a,(dots=e.children(".dots"))&&dots.children("a").each(function(e){var t=$(this);e==a?t.addClass("selected"):t.removeClass("selected")})):setTimeout(function(){showSlide(e,a)},123)}function stopSlides(e,t){clearInterval(e.slide_interval),t&&showSlide(e,t)}function prepareToggle(e){var t=$(e),o=$('<span class="toggle">'),l=$('<input type="hidden">');t.find("input[type=radio]").each(function(e){var t=$(this);0==e&&(l.attr("id",t.attr("id").split("-yes").join("").split("-no").join("")),l.attr("name",t.attr("name")));var i=t.next("label"),a=$('<a href="#">'),n=t.attr("value");a.attr("data-value",n),1==n?a.addClass("affirmative"):a.addClass("negatory"),a.text(i.text()),"checked"==t.attr("checked")&&(l.attr("value",n),a.addClass("selected")),a.click(function(e){e.preventDefault();var t=$(this);t.data("value")!=t.parent().find("input[type=hidden]").val()&&(t.parent().find("a").toggleClass("selected"),t.parent().find("input[type=hidden]").val(t.parent().find("a.selected").data("value")))}),t.remove(),i.remove(),o.append(a)}),o.append(l),t.append(o)}function noSpam(e){addy=-1==e.attr("href").indexOf("#")?e.attr("href").split("mailto:").join(""):e.html(),window.location.replace("mailto:"+addy.split("[at]").join("@").split(" ").join(""))}function hex2rgb(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,a){return t+t+i+i+a+a});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function slugify(e){return e.trim().toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}function urify(e){return e.trim().toLowerCase().replace(/[^\w\/ ]+/g,"").replace(/ +/g,"-")}function capitalize(e){return String(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})}function htmlEntities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function prepareHeatMap(e){var t=$(e),i=$("<canvas></canvas>").css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"0","background-color":"transparent"}).appendTo(t);t.find(".row").css({position:"relative","z-index":1,"pointer-events":"none"}),t.find("a").css("pointer-events","initial"),$("body").css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});var a=i[0],n=a.getContext("2d"),o=i.outerWidth(),l=i.outerHeight();a.width=o,a.height=l;var s={density:.3,clickSize:30,clearScreen:function(){n.clearRect(0,0,o,l)}},c=!1;i.on("mouseover touchstart",function(){c||(c=!0)}),i.on("mousemove touchmove",function(e){c&&heatMapPlotPoint(a,s,e.clientX,e.clientY)})}function heatMapMakeHot(e,t,i,a,n){for(var o=e.getContext("2d"),l=o.getImageData(t,i,a,n),s=l.data,c=0;c<s.length;c+=4)if(0!==s[c+3]){var r=s[c+3],d=0,p=0,f=0,h=0;r<=255&&235<=r?(d=255-(h=255-r),p=12*h):r<=234&&200<=r?(d=255-8*(h=234-r),p=255):r<=199&&150<=r?(p=255,f=5*(h=199-r)):(r<=149&&100<=r&&(p=255-5*(h=149-r)),f=255),s[c]=d,s[c+1]=p,s[c+2]=f,s[c+3]=r}o.putImageData(l,t,i)}function heatMapPlotPoint(e,t,i,a){var n=e.getContext("2d"),o=n.createRadialGradient(0,0,1,0,0,t.clickSize);o.addColorStop(0,"rgba(0,0,0,"+t.density+")"),o.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=o,n.save(),n.translate(i,a),n.beginPath(),n.arc(0,0,t.clickSize,0,2*Math.PI),n.fill(),n.restore(),heatMapMakeHot(e,i-t.clickSize,a-t.clickSize,2*t.clickSize,2*t.clickSize)}var slide_time=4444,slide_transition=555,text_transition=777,fade_transition=333,spinner=$("<img>").attr("src","/_img/loading.gif");$(function(){$("html").removeClass("no-js"),$(".navigation").each(function(){prepareNav(this),adjustNav(this)}),smartquotes(),$("#main h1, #main h2, #main h3, #main h4, #main h5, #main h6, #main li, #main p, #main blockquote").widont(),$(".grid").fitVids(),$("a.email").each(function(e,t){var i=$(t);i.html(i.html().split(" [at] ").join("[at]").split("[at]").join("@<wbr>")),i.attr("href",i.attr("href").split(" [at] ").join("[at]").split("[at]").join("@")),i.click(function(e){e.preventDefault(),noSpam($(this))})}),$("a.print").click(function(e){e.preventDefault(),window.print()}),$(".togglee").hide(),$(".toggler").click(function(e){e.preventDefault();var t=$(this);$(".togglee"+t.attr("href")).toggle()}),$("a.lightboxed.gallery").magnificPopup({type:"image",removalDelay:fade_transition,image:{titleSrc:!1},gallery:{enabled:!0}}),$("a.lightboxed:not(.gallery)").each(function(){var e=$(this),t=e.attr("href").toLowerCase(),i="iframe";0==t.indexOf("#")&&(i="inline",$(t).addClass("lightbox mfp-hide")),t.indexOf(".jpg")!=t.length-4&&t.indexOf(".jpeg")!=t.length-5&&t.indexOf(".png")!=t.length-4&&t.indexOf(".gif")!=t.length-4||(i="image"),1==e.find("img").length&&-1==t.indexOf("youtube.com")&&-1==t.indexOf("vimeo.com")&&(i="image"),e.magnificPopup({type:i,removalDelay:fade_transition})}),$(".slideshow").each(function(){prepareSlideshow(this)}),$("body.user-admin").keydown(function(e){e.altKey&&$(this).css("cursor","alias")}).keyup(function(){$(this).css("cursor","default")}).bind("click",function(e){e.altKey&&(window.location=$(this).data("edit-mode"))}),$("a.scroll[href^='#']").click(function(e){e.preventDefault();var t=$($(this).attr("href"));t.length||(t=$("a[name='"+$(this).attr("href").split("#").join("")+"']")),t.length&&$("html, body").animate({scrollTop:t.offset().top},333)}),$("a[href='#up']").click(function(e){e.preventDefault();var t=$("#main").offset().top||0;$("html, body").animate({scrollTop:t},333)}),$(".click-to-select").click(function(){selectText(this)}),$("button[type=submit][disabled].enable").delay(3333).queue(function(){$(this).prop("disabled",!1)}),$(".heatmap").each(function(){var e=this;$.getScript("https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js",function(){prepareHeatMap(e)})})}),$(window).load(function(){$("body").removeClass("preload")}),$(window).bind("resize orientationchange",function(){$(".navigation").each(function(){adjustNav(this)})}),$.fn.widont=function(){var e=this.get(0);if(e){var t=(e=$(e)).text().match(/ /g);return t&&1<t.length&&e.html(e.html().replace(/\s([^\s<]{0,10})\s*$/,"&nbsp;$1")),this}},$.fn.outerHTML=function(){var e=this.get(0);if(e)return(e=$(e)).clone().wrap("<div>").parent().html()},$.fn.selectText=function(){var e,t,i=this.get(0);if(i)return document.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(i),e.select()):window.getSelection&&(t=window.getSelection(),(e=document.createRange()).selectNodeContents(i),t.removeAllRanges(),t.addRange(e)),this},$.fn.getCaretPosition=function(){var e=this.get(0);if(e){if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),i=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}}},$.fn.setCaretPosition=function(e){var t=this.get(0);if(t){if("setSelectionRange"in t)return t.setSelectionRange(e,e);if(document.selection){var i=t.createTextRange();i.collapse(!0),e<0&&(e=t.val().length+e),i.moveEnd("character",e),i.moveStart("character",e),i.select()}}},$.fn.tag=function(){var e=this.get(0);if(e){var t=$(e).prop("tagName");return t?t.toLowerCase():t}},$.fn.slideFadeToggle=function(e,t,i){return this.animate({opacity:"toggle",height:"toggle"},e,t,i)};